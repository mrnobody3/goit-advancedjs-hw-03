{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY =\n  'live_fgu8iS6wymqhXDmI8v5efK6dfuAQbMhu9CJZc761AlQip0E7bIdGEACcOH4rXg1T';\n\naxios.defaults.headers.common['x-api-key'] = API_KEY;\n\nexport function fetchBreeds() {\n  return axios.get('https://api.thecatapi.com/v1/breeds');\n}\n\nexport function fetchCatByBreed(breedId) {\n  return axios.get('https://api.thecatapi.com/v1/images/search', {\n    params: {\n      breed_ids: breedId,\n    },\n  });\n}\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const refs = {\n  selectEl: document.querySelector('.breed-select'),\n  catInfoEl: document.querySelector('.cat-info'),\n  loaderEl: document.querySelector('.loader'),\n};\nshowEl(refs.loaderEl);\n\nconst select = new SlimSelect({\n  select: refs.selectEl,\n  settings: {\n    allowDeselect: true,\n  },\n  events: {\n    beforeChange: (newVal, oldVal) => {\n      showEl(refs.loaderEl);\n      fetchCatByBreed(newVal[0]?.value || oldVal[0]?.value)\n        .then(({ data }) => {\n          if (data.length) {\n            refs.catInfoEl.innerHTML = markup({\n              url: data[0]?.url,\n              name: data[0]?.breeds[0]?.name,\n              desc: data[0]?.breeds[0]?.description,\n              temp: data[0]?.breeds[0]?.temperament,\n            });\n            return;\n          }\n          refs.catInfoEl.innerHTML = '';\n\n          iziToast.show({\n            title: 'Error',\n            message: 'Oops! Something went wrong! Try other one!',\n            color: 'red',\n            position: 'topRight',\n          });\n        })\n        .catch(e => {\n          iziToast.show({\n            title: 'Error',\n            message: 'Oops! Something went wrong! Try other one!',\n            color: 'red',\n            position: 'topRight',\n          });\n        })\n        .finally(() => {\n          hideEl(refs.loaderEl);\n        });\n\n      // return false; // this will stop the change from happening\n    },\n\n    error: function (err) {\n      console.log('error-->', err);\n      iziToast.show({\n        title: 'Error',\n        message: 'Oops! Something went wrong! Try reloading the page!',\n        color: 'red',\n        position: 'topRight',\n      });\n    },\n  },\n});\n\nfetchBreeds()\n  .then(({ data }) => {\n    const optData = data.map(({ name, id }) => ({ text: name, value: id }));\n    select.setData(optData);\n    showEl(refs.selectEl);\n  })\n  .catch(e => {\n    iziToast.show({\n      title: 'Error',\n      message: 'Oops! Something went wrong! Try reloading the page!',\n      color: 'red',\n      position: 'topRight',\n    });\n  })\n  .finally(() => {\n    hideEl(refs.loaderEl);\n  });\n\nfunction markup({ url, name, desc, temp }) {\n  return `\n      <img src=\"${url}\" alt=\"${name}\" width=\"500\" />\n      <div class=\"\">\n        <h2>${name}</h2>\n        <p>${desc}</p>\n        <p>Temperaments: <span style=\"font-weight: bold;\">${temp}</span></p>\n      </div>\n      `;\n}\n\nexport function showEl(elem) {\n  elem.classList.remove('hidden');\n}\nexport function hideEl(elem) {\n  elem.classList.add('hidden');\n}\n"],"names":["API_KEY","axios","fetchBreeds","fetchCatByBreed","breedId","refs","showEl","select","SlimSelect","newVal","oldVal","_a","_b","data","markup","_c","_e","_d","_g","_f","iziToast","hideEl","err","optData","name","id","e","url","desc","temp","elem"],"mappings":"+vBAEA,MAAMA,EACJ,wEAEFC,EAAM,SAAS,QAAQ,OAAO,aAAeD,EAEtC,SAASE,GAAc,CAC5B,OAAOD,EAAM,IAAI,qCAAqC,CACxD,CAEO,SAASE,EAAgBC,EAAS,CACvC,OAAOH,EAAM,IAAI,6CAA8C,CAC7D,OAAQ,CACN,UAAWG,CACZ,CACL,CAAG,CACH,CCZO,MAAMC,EAAO,CAClB,SAAU,SAAS,cAAc,eAAe,EAChD,UAAW,SAAS,cAAc,WAAW,EAC7C,SAAU,SAAS,cAAc,SAAS,CAC5C,EACAC,EAAOD,EAAK,QAAQ,EAEpB,MAAME,EAAS,IAAIC,EAAW,CAC5B,OAAQH,EAAK,SACb,SAAU,CACR,cAAe,EAChB,EACD,OAAQ,CACN,aAAc,CAACI,EAAQC,IAAW,SAChCJ,EAAOD,EAAK,QAAQ,EACpBF,IAAgBQ,EAAAF,EAAO,KAAP,YAAAE,EAAW,UAASC,EAAAF,EAAO,KAAP,YAAAE,EAAW,MAAK,EACjD,KAAK,CAAC,CAAE,KAAAC,KAAW,mBAClB,GAAIA,EAAK,OAAQ,CACfR,EAAK,UAAU,UAAYS,EAAO,CAChC,KAAKH,EAAAE,EAAK,KAAL,YAAAF,EAAS,IACd,MAAMI,GAAAH,EAAAC,EAAK,KAAL,YAAAD,EAAS,OAAO,KAAhB,YAAAG,EAAoB,KAC1B,MAAMC,GAAAC,EAAAJ,EAAK,KAAL,YAAAI,EAAS,OAAO,KAAhB,YAAAD,EAAoB,YAC1B,MAAME,GAAAC,EAAAN,EAAK,KAAL,YAAAM,EAAS,OAAO,KAAhB,YAAAD,EAAoB,WACxC,CAAa,EACD,MACD,CACDb,EAAK,UAAU,UAAY,GAE3Be,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,6CACT,MAAO,MACP,SAAU,UACtB,CAAW,CACX,CAAS,EACA,MAAM,GAAK,CACVA,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,6CACT,MAAO,MACP,SAAU,UACtB,CAAW,CACX,CAAS,EACA,QAAQ,IAAM,CACbC,EAAOhB,EAAK,QAAQ,CAC9B,CAAS,CAGJ,EAED,MAAO,SAAUiB,EAAK,CACpB,QAAQ,IAAI,WAAYA,CAAG,EAC3BF,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,sDACT,MAAO,MACP,SAAU,UAClB,CAAO,CACF,CACF,CACH,CAAC,EAEDlB,EAAa,EACV,KAAK,CAAC,CAAE,KAAAW,KAAW,CAClB,MAAMU,EAAUV,EAAK,IAAI,CAAC,CAAE,KAAAW,EAAM,GAAAC,MAAU,CAAE,KAAMD,EAAM,MAAOC,CAAE,EAAG,EACtElB,EAAO,QAAQgB,CAAO,EACtBjB,EAAOD,EAAK,QAAQ,CACxB,CAAG,EACA,MAAMqB,GAAK,CACVN,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,sDACT,MAAO,MACP,SAAU,UAChB,CAAK,CACL,CAAG,EACA,QAAQ,IAAM,CACbC,EAAOhB,EAAK,QAAQ,CACxB,CAAG,EAEH,SAASS,EAAO,CAAE,IAAAa,EAAK,KAAAH,EAAM,KAAAI,EAAM,KAAAC,CAAI,EAAI,CACzC,MAAO;AAAA,kBACSF,WAAaH;AAAA;AAAA,cAEjBA;AAAA,aACDI;AAAA,4DAC+CC;AAAA;AAAA,OAG5D,CAEO,SAASvB,EAAOwB,EAAM,CAC3BA,EAAK,UAAU,OAAO,QAAQ,CAChC,CACO,SAAST,EAAOS,EAAM,CAC3BA,EAAK,UAAU,IAAI,QAAQ,CAC7B"}